version: '3.8'

# XoneAI Bot Services
# Run specific bots: docker compose up slack-bot
# Run all bots: docker compose up

services:
  # Slack Bot
  slack-bot:
    build:
      context: ../..
      dockerfile: docker/bots/Dockerfile
    volumes:
      - xone_data:/root/.xone
    environment:
      OPENAI_API_KEY: ${OPENAI_API_KEY}
      SLACK_BOT_TOKEN: ${SLACK_BOT_TOKEN}
      SLACK_APP_TOKEN: ${SLACK_APP_TOKEN}
      XONE_CONFIG_DIR: /root/.xone
    command: [ "xoneai", "bot", "slack" ]
    restart: unless-stopped

  # Discord Bot
  discord-bot:
    build:
      context: ../..
      dockerfile: docker/bots/Dockerfile
    volumes:
      - xone_data:/root/.xone
    environment:
      OPENAI_API_KEY: ${OPENAI_API_KEY}
      DISCORD_BOT_TOKEN: ${DISCORD_BOT_TOKEN}
      XONE_CONFIG_DIR: /root/.xone
    command: [ "xoneai", "bot", "discord" ]
    restart: unless-stopped

  # Telegram Bot
  telegram-bot:
    build:
      context: ../..
      dockerfile: docker/bots/Dockerfile
    volumes:
      - xone_data:/root/.xone
    environment:
      OPENAI_API_KEY: ${OPENAI_API_KEY}
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN}
      XONE_CONFIG_DIR: /root/.xone
    command: [ "xoneai", "bot", "telegram" ]
    restart: unless-stopped

volumes:
  xone_data:
    driver: local
